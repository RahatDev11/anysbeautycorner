<!-- হেডার -->
<header class="bg-brushstroke text-white p-4 flex justify-between items-center fixed top-0 left-0 w-full z-50">
  <!-- লোগো -->
  <a class="flex items-center" href="index.html">
    <div class="flex items-center">
      <img alt="Any's Beauty Corner লোগো" class="h-10 w-10 rounded-full mr-2 border-2 border-lipstick" height="40" src="img.jpg" width="40" onerror="this.src='https://via.placeholder.com/40'; this.alt='লোগো লোড হয়নি';">
      <span class="text-lg font-bold">
        Any's Beauty Corner
      </span>
    </div>
  </a>
  <!-- ডেস্কটপ সার্চ বার -->
  <div class="hidden md:block p-2 w-80 mx-auto relative">
    <div class="relative">
      <input class="w-full p-2 pl-10 border-0 rounded-full text-gray-800 focus:outline-none focus:ring-2 focus:ring-lipstick bg-white/50 backdrop-blur-sm placeholder:text-gray-400/80" id="searchInputDesktop" oninput="searchProductsDesktop()" placeholder="প্রোডাক্ট সার্চ করুন..." type="text" />
      <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400/80"></i>
    </div>
    <!-- সার্চ রেজাল্ট -->
    <div class="mt-2 max-h-60 overflow-y-auto absolute bg-white/90 backdrop-blur-sm w-full shadow-lg rounded-lg z-50" id="searchResultsDesktop"></div>
  </div>
  <!-- মোবাইল সার্চ আইকন -->
  <div class="md:hidden cursor-pointer" onclick="focusMobileSearch()">
    <i class="fas fa-search text-white text-xl"></i>
  </div>
  <!-- শপিং ব্যাগ আইকন -->
  <button id="cartButton" class="bg-lipstick text-white w-10 h-10 mr-4 rounded-full shadow-lg flex items-center justify-center">
    <i class="fas fa-shopping-bag"></i>
  </button>
  
  <!-- কার্ট সাইডবার -->
  <div id="cartSidebar" class="fixed top-0 right-0 h-full w-80 bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">
    <div class="p-4">
      <!-- কার্ট বন্ধ করার বাটন -->
      <button onclick="closeCartSidebar()" class="text-gray-600 hover:text-gray-900">
        <i class="fas fa-times"></i>
      </button>
      <!-- কার্ট হেডিং -->
      <h2 class="text-xl text-black font-bold mb-4">কার্ট</h2>
      <!-- কার্ট আইটেমগুলি -->
      <div id="cartItems" class="space-y-4">
        <!-- কার্ট আইটেমগুলি এখানে যোগ হবে -->
      </div>
      <!-- চেকআউট বাটন -->
      <div class="cart-footer">
        <p id="totalPrice">মোট মূল্য: 0 টাকা</p>
        <button onclick="checkout()" class="checkout-btn">চেকআউট</button>
      </div>
    </div>
  </div>
  
  <!-- কার্ট ওভারলে -->
  <div id="cartOverlay" class="fixed inset-0 bg-black/50 z-40 hidden" onclick="closeCartSidebar()"></div>
  <!-- টোস্ট নোটিফিকেশন -->
  <div id="toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg hidden">
    আপনার প্রোডাক্টটি কার্টে যোগ করা হয়েছে!
  </div>
  <!-- মোবাইল মেনু বাটন -->
  <button class="bg-white text-lipstick px-4 py-2 rounded md:hidden" onclick="openSidebar()">
    ☰
  </button>
  <!-- মোবাইল সাইডবার ওভারলে -->
  <div class="fixed inset-0 z-40 hidden" id="sidebarOverlay">
    <div class="fixed top-0 left-0 h-full w-4/5 bg-white/5 backdrop-blur-lg shadow-lg transform -translate-x-full transition-transform duration-500 ease-in-out" id="sidebar">
      <div class="p-4">
        <button class="text-gray-600 hover:text-gray-900" onclick="closeSidebar()">
          <i class="fas fa-times"></i>
        </button>
        <ul class="mt-4">
          <li>
            <a class="block py-2 text-gray-800 hover:bg-gray-100" href="index.html#home" onclick="handleMenuItemClick()">
              হোম
            </a>
          </li>
          <li>
            <a class="block py-2 text-gray-800 hover:bg-gray-100" href="index.html#about" onclick="handleMenuItemClick()">
              আমাদের সম্পর্কে
            </a>
          </li>
          <li>
            <button class="flex items-center justify-between w-full text-left text-gray-800 hover:bg-gray-100" onclick="toggleSubMenuMobile(event)">
              <span>পণ্য সমূহ</span>
              <i class="fas fa-chevron-down ml-2 transition-transform duration-300" id="arrowIcon"></i>
            </button>
            <div class="hidden bg-white/5 backdrop-blur-sm rounded-lg mt-1 ml-4" id="subMenuMobile">
              <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#all" onclick="handleSubMenuItemClick('all')">
                সকল প্রোডাক্ট
              </a>
               <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#health" onclick="handleSubMenuItemClick('health')">
                স্বাস্থ্য
              </a>             
              <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#cosmetics" onclick="handleSubMenuItemClick('cosmetics')">
                মেকআপ
              </a>
              <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#skincare" onclick="handleSubMenuItemClick('skincare')">
                স্কিনকেয়ার
              </a>
              <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#haircare" onclick="handleSubMenuItemClick('haircare')">
                হেয়ারকেয়ার
              </a>
              <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#mehandi" onclick="handleSubMenuItemClick('mehandi')">
                মেহেদী
              </a>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class="fixed top-0 right-0 h-full w-1/5" id="blankArea" onclick="closeSidebar()"></div>
  </div>
  <!-- ডেস্কটপ মেনু -->
  <nav class="hidden md:flex space-x-4 items-center mr-20">
    <a class="text-gray-800 hover:text-highlight" href="index.html#home">
      হোম
    </a>
    <a class="text-gray-800 hover:text-highlight" href="index.html#about">
      আমাদের সম্পর্কে
    </a>
    <div class="relative">
      <button class="text-gray-800 hover:text-highlight" onclick="toggleSubMenuDesktop()">
        পণ্য সমূহ
        <i class="fas fa-chevron-down ml-2 transition-transform duration-300" id="desktopArrowIcon"></i>
      </button>
    </div>
  </nav>
  <!-- ডেস্কটপ টপ বার (সাবমেনু) -->
  <div class="hidden absolute top-full left-0 w-full bg-white shadow-lg z-40" id="desktopSubMenuBar">
    <div class="container mx-auto p-4">
      <div class="grid grid-cols-4 gap-4">
        <a class="block p-2 text-gray-800 hover:bg-gray-100" href="#all" onclick="filterProducts('all')">
          সকল প্রোডাক্ট
        </a>
               <a class="block px-4 py-2 text-gray-800 hover:bg-gray-200" href="#health" onclick="handleSubMenuItemClick('health')">
                 স্বাস্থ্য
               </a>        
        <a class="block p-2 text-gray-800 hover:bg-gray-100" href="#cosmetics" onclick="filterProducts('cosmetics')">
          মেকআপ
        </a>
        <a class="block p-2 text-gray-800 hover:bg-gray-100" href="#skincare" onclick="filterProducts('skincare')">
          স্কিনকেয়ার
        </a>
        <a class="block p-2 text-gray-800 hover:bg-gray-100" href="#haircare" onclick="filterProducts('haircare')">
          হেয়ারকেয়ার
        </a>
        <a class="block p-2 text-gray-800 hover:bg-gray-100" href="#mehandi" onclick="filterProducts('mehandi')">
          মেহেদী
        </a>
      </div>
    </div>
  </div>
</header>

<!-- হেডারের জাভাস্ক্রিপ্ট -->
<script>
// মোবাইল সাইডবার খোলার ফাংশন
function openSidebar() {
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const sidebar = document.getElementById('sidebar');
    if (sidebarOverlay && sidebar) {
        sidebarOverlay.classList.remove('hidden');
        sidebarOverlay.classList.add('active');
        sidebar.classList.remove('-translate-x-full');
        sidebar.classList.add('slide-in');
    }
}

// মোবাইল সাইডবার বন্ধ করার ফাংশন
function closeSidebar() {
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const sidebar = document.getElementById('sidebar');
    if (sidebarOverlay && sidebar) {
        sidebar.classList.add('-translate-x-full');
        sidebarOverlay.classList.remove('active');
        sidebarOverlay.classList.add('hidden');
        const subMenuMobile = document.getElementById('subMenuMobile');
        const arrowIcon = document.getElementById('arrowIcon');
        if (subMenuMobile && arrowIcon) {
            subMenuMobile.classList.add('hidden');
            arrowIcon.classList.remove('rotate-180');
            arrowIcon.classList.add('fa-chevron-down');
            arrowIcon.classList.remove('fa-chevron-up');
        }
    }
}

// মেনু আইটেম ক্লিক করার ফাংশন
function handleMenuItemClick() {
    closeSidebar();
}

// সাবমেনু আইটেম ক্লিক করার ফাংশন
function handleSubMenuItemClick(category) {
    filterProducts(category);
    const subMenuMobile = document.getElementById('subMenuMobile');
    if (subMenuMobile) {
        subMenuMobile.classList.add('hidden');
    }
    closeSidebar();
}

// সাবমেনু টগল করার ফাংশন
function toggleSubMenuMobile(event) {
    event.stopPropagation();
    const subMenuMobile = document.getElementById('subMenuMobile');
    const arrowIcon = document.getElementById('arrowIcon');
    if (subMenuMobile && arrowIcon) {
        subMenuMobile.classList.toggle('hidden');
        arrowIcon.classList.toggle('rotate-180');
        arrowIcon.classList.toggle('fa-chevron-down');
        arrowIcon.classList.toggle('fa-chevron-up');
    }
}

// ডেস্কটপ সাবমেনু টগল করার ফাংশন
function toggleSubMenuDesktop() {
    const desktopSubMenuBar = document.getElementById('desktopSubMenuBar');
    const desktopArrowIcon = document.getElementById('desktopArrowIcon');
    if (desktopSubMenuBar && desktopArrowIcon) {
        desktopSubMenuBar.classList.toggle('hidden');
        desktopSubMenuBar.classList.toggle('slide-down');
        desktopArrowIcon.classList.toggle('rotate-180');
        desktopArrowIcon.classList.toggle('fa-chevron-down');
        desktopArrowIcon.classList.toggle('fa-chevron-up');
    }
}

// কার্ট সাইডবার কন্ট্রোল
function openCartSidebar() {
    const cartSidebar = document.getElementById('cartSidebar');
    const cartOverlay = document.getElementById('cartOverlay');
    if (cartSidebar && cartOverlay) {
        cartSidebar.classList.remove('translate-x-full');
        cartOverlay.classList.remove('hidden');
    }
}

function closeCartSidebar() {
    const cartSidebar = document.getElementById('cartSidebar');
    const cartOverlay = document.getElementById('cartOverlay');
    if (cartSidebar && cartOverlay) {
        cartSidebar.classList.add('translate-x-full');
        cartOverlay.classList.add('hidden');
    }
}

// মোবাইল সার্চ বার ফোকাস
function focusMobileSearch() {
    const mobileSearchBar = document.getElementById('mobileSearchBar');
    if (mobileSearchBar) {
        mobileSearchBar.classList.toggle('hidden');
        mobileSearchBar.classList.toggle('show');
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.focus();
        }
    }
}

// ডকুমেন্টে ক্লিক ইভেন্ট লিসেনার
document.addEventListener("click", (event) => {
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const subMenuMobile = document.getElementById('subMenuMobile');
    const desktopSubMenuBar = document.getElementById('desktopSubMenuBar');

    // মোবাইল সাইডবার বন্ধ করুন
    if (sidebarOverlay && !event.target.closest('#sidebar') && !event.target.closest('button[onclick="openSidebar()"]')) {
        closeSidebar();
    }

    // মোবাইল সাবমেনু বন্ধ করুন
    if (subMenuMobile && !event.target.closest('#subMenuMobile') && !event.target.closest('button[onclick="toggleSubMenuMobile(event)"]')) {
        subMenuMobile.classList.add('hidden');
        const arrowIcon = document.getElementById('arrowIcon');
        if (arrowIcon) {
            arrowIcon.classList.remove('rotate-180');
            arrowIcon.classList.add('fa-chevron-down');
            arrowIcon.classList.remove('fa-chevron-up');
        }
    }

    // ডেস্কটপ সাবমেনু বন্ধ করুন
    if (desktopSubMenuBar && !event.target.closest('#desktopSubMenuBar') && !event.target.closest('button[onclick="toggleSubMenuDesktop()"]')) {
        desktopSubMenuBar.classList.add('hidden');
        desktopSubMenuBar.classList.remove('slide-down');
        const desktopArrowIcon = document.getElementById('desktopArrowIcon');
        if (desktopArrowIcon) {
            desktopArrowIcon.classList.remove('rotate-180');
            desktopArrowIcon.classList.add('fa-chevron-down');
            desktopArrowIcon.classList.remove('fa-chevron-up');
        }
    }

    // কার্ট সাইডবার বন্ধ করুন
    const cartSidebar = document.getElementById('cartSidebar');
    if (cartSidebar && !event.target.closest('#cartSidebar') && !event.target.closest('#cartButton')) {
        closeCartSidebar();
    }
});

// স্ক্রল করলে মেনু এবং সার্চ বার ক্লোজ করার ফাংশন
window.addEventListener('scroll', () => {
    const subMenuMobile = document.getElementById('subMenuMobile');
    const desktopSubMenuBar = document.getElementById('desktopSubMenuBar');
    const mobileSearchBar = document.getElementById('mobileSearchBar');

    if (subMenuMobile && !subMenuMobile.classList.contains('hidden')) {
        subMenuMobile.classList.add('hidden');
        const arrowIcon = document.getElementById('arrowIcon');
        if (arrowIcon) {
            arrowIcon.classList.remove('rotate-180');
            arrowIcon.classList.add('fa-chevron-down');
            arrowIcon.classList.remove('fa-chevron-up');
        }
    }

    if (desktopSubMenuBar && !desktopSubMenuBar.classList.contains('hidden')) {
        desktopSubMenuBar.classList.add('hidden');
        desktopSubMenuBar.classList.remove('slide-down');
        const desktopArrowIcon = document.getElementById('desktopArrowIcon');
        if (desktopArrowIcon) {
            desktopArrowIcon.classList.remove('rotate-180');
            desktopArrowIcon.classList.add('fa-chevron-down');
            desktopArrowIcon.classList.remove('fa-chevron-up');
        }
    }

    if (window.innerWidth < 768 && mobileSearchBar && !mobileSearchBar.classList.contains('hidden')) {
        mobileSearchBar.classList.add('hidden');
    }
});

// হেডার লোড হওয়ার পর ইভেন্ট লিসেনার যোগ করার ফাংশন
function initializeHeaderEvents() {
    const cartButton = document.getElementById('cartButton');
    const cartSidebar = document.getElementById('cartSidebar');

    if (cartButton) {
        cartButton.addEventListener('click', () => {
            openCartSidebar(); // শুধুমাত্র সাইডবার ওপেন করবে, কোনো প্রোডাক্ট যোগ হবে না
        });
    }

    if (cartSidebar) {
        cartSidebar.addEventListener('click', (e) => e.stopPropagation());
    }
}

// হেডার লোড হওয়ার পর ইভেন্ট লিসেনার যোগ করুন
setTimeout(initializeHeaderEvents, 0);
</script>